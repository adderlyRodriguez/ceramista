{% extends "base.html" %}

{% block content %}
<h2>Nuestros Trabajos Recientes</h2>

<div class="projects-grid">
  {% for project in projects %}
    <div class="project-card">
      <div class="project-media">
        {% if project.media_type == 'image' %}
          <img src="{{ project.media_url }}" alt="{{ project.title }}" loading="lazy">
        {% else %}
          <video src="{{ project.media_url }}" controls></video>
        {% endif %}
      </div>
      
      <div class="project-info">
        <h3>{{ project.title }}</h3>
        <p>{{ project.description }}</p>

        {% if session.get('admin') %}
          <div class="admin-actions">
            <a href="{{ url_for('edit_project', project_id=project.id) }}" class="btn btn-small">Editar</a>
            <form method="POST"
                  action="{{ url_for('delete_project', project_id=project.id) }}"
                  style="display:inline">
              <button type="submit"
                      class="btn btn-small btn-danger"
                      onclick="return confirm('¿Está seguro de eliminar este proyecto?')">
                Eliminar
              </button>
            </form>
          </div>
        {% endif %}
      </div>
    </div>
  {% else %}
    <p>No hay proyectos para mostrar en este momento.</p>
  {% endfor %}
</div>
{% endblock %}